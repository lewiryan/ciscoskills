<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>RADIUS on Cisco Skills</title>
    <link>https://ciscoskills.net/tags/radius/</link>
    <description>Recent content in RADIUS on Cisco Skills</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Tue, 12 Apr 2016 12:55:00 +0000</lastBuildDate><atom:link href="https://ciscoskills.net/tags/radius/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RBAC Radius with Microsoft NPS 2012 R2</title>
      <link>https://ciscoskills.net/2016/04/rbac-radius-with-microsoft-nps-2012-r2/</link>
      <pubDate>Tue, 12 Apr 2016 12:55:00 +0000</pubDate>
      
      <guid>https://ciscoskills.net/2016/04/rbac-radius-with-microsoft-nps-2012-r2/</guid>
      <description>
        
          &lt;p&gt;In this configuration I&#39;m at looking at using Microsoft NPS 2012 R2 as radius server and I’m going to skip the installation of NPS because it really is just a next, next, finish installation. In this demo I already have this NPS system connected to a Windows domain, my goal is to create role based access on Cisco IOS routers while using radius to login. I’ll have a couple for active directory accounts each them will represent different types of allowed access to these IOS routers. One account will get full administrative access while the other will only get read access, how cool cat is that ;)&lt;/p&gt;
&lt;p&gt;We have to get some house-cleaning things done first before we jump into it. To keep this simple in this example I&#39;m only using one router and this router is able to reach the radius server. I’ll have to create an enable secret on the device, create a local username with a password, and turn AAA (Authentication, Authorization, Accounting). I like to create my own AAA method lists one for the console logins and one for remote logins here is what I got so far:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;enable secret 0 cisco
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;username admin privilege 15 secret 0 cisco
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;aaa new-model
&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;aaa authentication login OPEN-CONSOLE none
&lt;span class=&#34;ln&#34;&gt;5&lt;/span&gt;aaa authentication login RADIUS-LOCAL group radius local-case
&lt;span class=&#34;ln&#34;&gt;6&lt;/span&gt;aaa authorization exec default group radius if-authenticated
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The router needs to know where radius server is located, we also need to put in a radius key and this needs to match between both the router and radius server.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;radius server RADIUS
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;address ipv4 192.168.5.10 auth-port 1812 acct-port 1813
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;key cisco123
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If our router has more than one active interface we also should specify which IP interface we want the radius information to come from. In this example GigabitEthernet 0/1 will be the source interface.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ip radius source-interface GigabitEthernet0/1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Apply this AAA method to the console and VTY ports:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;line con 0 login authentication OPEN-CONSOLE exit
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;line vty 0 4 login authentication RADIUS-LOCAL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The magic begins with the Microsoft NPS server although any radius server is just as magical. We first have to create our client list within the Microsoft NPS. I have just used the defaults and have kept note of the radius key we configured earlier. This is pretty simple, expand the Radius Clients and Servers folder and right-click on Radius Clients and select new.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-1.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;A new window will show, populate the information with a friendly name of the device you wish to add, IP address of the device and the radius key. After that select OK.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: &lt;em&gt;Make sure the address matches to what you have configured as the source-interface on the router in this example it was GigabitEthernet0/1.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-2.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Once we have the all the clients in the client list we can now go to the Connection Request Polices. I usually just delete the existing policy, &lt;em&gt;Use Windows authentication for all users&lt;/em&gt; and create a new policy called &lt;em&gt;Radius-Login&lt;/em&gt;. Right-click on the Connection Request Policy folder, select new and follow these steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Add a policy name and click next.&lt;/li&gt;
&lt;li&gt;Add a condition, (I usually do a a day and time condition and select the time frame you want logins to occur. Select next.&lt;/li&gt;
&lt;li&gt;Accept the defaults, Authenticate requests on this server, select next.&lt;/li&gt;
&lt;li&gt;Don&#39;t override anything, select next&lt;/li&gt;
&lt;li&gt;Leave the defaults which is blank on everything, select next.&lt;/li&gt;
&lt;li&gt;At the Connection Request Policy summary page it should look like something like below, select finish.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-3.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Go to the Network Policy Folder you will see some policies already created, delete those policies. We are going to create our own and the first policy is going to be a Network Administrators policy which will give full access to the IOS router if the user belongs to the correct Windows Security group. Right-click on the Network Policy folder and select new, new window will appear. Type in the policy name. In this example I&#39;m using &lt;em&gt;Allow Network Administrators - Administrative Access&lt;/em&gt;, select next. Under conditions select User Groups and in this example I have already created a security group on the Windows directory called &lt;em&gt;Network Administrators&lt;/em&gt;, select next. On the following screen grant access and select next as well.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-4.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;In the Authentication Methods clear the following check-boxes and select the Unencrypted Authentication (PAP, SPAP), select next and disregard the warning. On the following screen &lt;strong&gt;Configure Constraints&lt;/strong&gt; accept the defaults select next.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-5.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;We should be at the Configure Settings page, under the Radius Attributes delete the existing attributes and add &lt;em&gt;Service-Type Administrative&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-6.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Under Vendor Specific we need to add to a Cisco-AV Pair to tell the router to go to privilege level 15, select next when you add the &lt;strong&gt;shell:priv-lvl=15&lt;/strong&gt; in the Cisco-AV.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-7.png&#34; alt=&#34;&#34;&gt;
You are now at the summary page and it should pretty similar to what I have below, select Finish!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-8.png&#34; alt=&#34;&#34;&gt;
You have now just created your first radius network policy. If all is well and if you have a user in Windows Security group you should be able to login into the router via radius. In this example I was able to login into the HQ router with my Windows active directory username and password.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;login as: ryan
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;Using keyboard-interactive authentication.
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;Password:
&lt;span class=&#34;ln&#34;&gt;13&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;14&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;15&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt;16&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt;17&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt;18&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt;19&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt;20&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;21&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;22&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;23&lt;/span&gt;HQ#show privilege
&lt;span class=&#34;ln&#34;&gt;24&lt;/span&gt;Current privilege level is 15
&lt;span class=&#34;ln&#34;&gt;25&lt;/span&gt;HQ#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here is the debug information of AAA when I logged into the router using radius:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;HQ#debug aaa authentication
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt;AAA Authentication debugging is on
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;HQ#debug aaa authorization
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;AAA Authorization debugging is on
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;*Mar 13 18:36:59.854: AAA/BIND(00000013): Bind i/f
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;*Mar 13 18:36:59.855: AAA/AUTHEN/LOGIN (00000013): Pick method list &amp;#39;RADIUS-LOCAL&amp;#39;
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;*Mar 13 18:37:03.553: AAA/AUTHOR/EXEC(00000013): processing AV priv-lvl=15
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;*Mar 13 18:37:03.553: AAA/AUTHOR/EXEC(00000013): processing AV priv-lvl=15
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;*Mar 13 18:37:03.554: AAA/AUTHOR/EXEC(00000013): processing AV service-type=6
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;*Mar 13 18:37:03.554: AAA/AUTHOR/EXEC(00000013): Authorization successful
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So we have done pretty good but what about if we had a junior network technician and we did not want to allow full administration access to the device but this technician needs to be able to use show commands? How would we be able to do this with radius? Well with Cisco IOS you can use parser views, basically you configure a parser view on the IOS router call it name and configure the view to only allow the commands you want. You configure the radius server to pass the name of the parser view you created on the IOS router, if the parser view name matches the router will put that user into that view and only allow the user to use the commands that are configured in that view. More information about parser views can be found on Cisco website: &lt;a href=&#34;http://www.cisco.com/en/US/docs/ios/12_3t/12_3t7/feature/guide/gtclivws.html&#34;&gt;Role-Based CLI Access &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So in this example we are going to create a parser view called SHOWMODE and only allow show commands. In the enable prompt we want to be in &amp;quot;root view mode&amp;quot; to do this we would type enable view, the router is going to be asking for a password and that is your enable secret password you created at the beginning of this post.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; &lt;em&gt;If you have Radius enabled you will have to at least disable the client in NPS when you are first configuring a parser view. By disabling the client in NPS the router will fail-back to its local database of username and passwords to authenticate. The reason for this is because the router will try to use the NPS server to authenticate, this may not sound like a problem but the router is not using your username when you issue the command enable view. If your radius server has logging enabled you&#39;ll see that the router is using a different username called root. Since root is not in our Windows Active Directory the radius server will reject the request. Although you could create a user called root in Windows Active directory and put that user in the correct security groups to allow logins using radius that just doesn&#39;t sound like a good idea. The simplest method is to disable the client in NPS and use your enable secret password. Give it a second or two as this has to timeout before it fails-back to the local username and password database.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;login as: ryan
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;Using keyboard-interactive authentication.
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;Password:
&lt;span class=&#34;ln&#34;&gt;13&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;14&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;15&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt;16&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt;17&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt;18&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt;19&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt;20&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;21&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;22&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;23&lt;/span&gt;!
&lt;span class=&#34;ln&#34;&gt;24&lt;/span&gt;!DISABLE: the client in NPS before you type the command enable view
&lt;span class=&#34;ln&#34;&gt;25&lt;/span&gt;!
&lt;span class=&#34;ln&#34;&gt;26&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;27&lt;/span&gt;HQ#enable view
&lt;span class=&#34;ln&#34;&gt;28&lt;/span&gt;Password:
&lt;span class=&#34;ln&#34;&gt;29&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;30&lt;/span&gt;HQ#show privilege
&lt;span class=&#34;ln&#34;&gt;31&lt;/span&gt;Currently in View Context with view &amp;#39;root&amp;#39;
&lt;span class=&#34;ln&#34;&gt;32&lt;/span&gt;HQ#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now that we have verified we are in &amp;quot;root view&amp;quot; let&#39;s go to configuration mode and create a parser view called SHOWMODE. We also have to create another secret password this should be different from the enable secret.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;HQ(config)#parser view SHOWMODE
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;HQ(config-view)#secret 0 cisco123
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Once we have the password created we can tell the router what commands we want to allow in this view. In this example we are only allowing show commands so the command would be:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;HQ(config-view)#commands exec include all show
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;HQ(config-view)#exit
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;HQ(config)#exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We can test this parser view by going into it by using the command enable view SHOWMODE. We are prompt for the password to enter this view (Again the client on NPS should be disabled so that we can use our local username and password database on the router).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;HQ#enable view SHOWMODE
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;Password:
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;HQ#show privilege
&lt;span class=&#34;ln&#34;&gt;5&lt;/span&gt;Currently in View Context with view &amp;#39;SHOWMODE&amp;#39;
&lt;span class=&#34;ln&#34;&gt;6&lt;/span&gt;HQ#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If I issue a question mark (?) I get a list of the commands I can issue: (It looks I can only use show commands)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;HQ#?
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;Exec commands:
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;  &amp;lt;1-99&amp;gt;   Session number to resume
&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;  do-exec  Mode-independent &amp;#34;do-exec&amp;#34; prefix support
&lt;span class=&#34;ln&#34;&gt;5&lt;/span&gt;  enable   Turn on privileged commands
&lt;span class=&#34;ln&#34;&gt;6&lt;/span&gt;  exit     Exit from the EXEC
&lt;span class=&#34;ln&#34;&gt;7&lt;/span&gt;  show     Show running system information
&lt;span class=&#34;ln&#34;&gt;8&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;9&lt;/span&gt;HQ#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So we have created a parser view on our router now lets configure our Microsoft NPS server to use that parser view when our junior technician logs into this router. We have to create a new network policy in NPS. In this example I&#39;m calling it &lt;em&gt;Allow Network Operators - Read Only&lt;/em&gt;. Follow the steps you did before when we first created the Network Administrators policy the only difference of course is going to be a different Windows Active Directory security group and our radius attributes. We only need to focus on the Vendor Specific section of the network policy under the radius attributes section. We need to add a different Cisco AV-Pair called &lt;em&gt;shell:cli-view-name=SHOWMODE&lt;/em&gt; and also add the &lt;em&gt;shell:priv-lvl=15&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;It would look something like this, select next.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-9.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;We now should be at the summary screen of the new policy we just created and to give you a reference here is what I have for this example.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://ciscoskills.net/images/2016/03/nps-10-e.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Once we select finish we should be able to login to our router but this time it is going to be using the parser view we created. Joe is another account I have created in Windows Active Directory and this account is part of the network operators security group. Here is what I have when Joe logs into the router.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;login as: joe
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;Using keyboard-interactive authentication.
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;Password:
&lt;span class=&#34;ln&#34;&gt;13&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;14&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;15&lt;/span&gt;* IOSv is strictly limited to use for evaluation, demonstration and IOS  *
&lt;span class=&#34;ln&#34;&gt;16&lt;/span&gt;* education. IOSv is provided as-is and is not supported by Cisco&amp;#39;s      *
&lt;span class=&#34;ln&#34;&gt;17&lt;/span&gt;* Technical Advisory Center. Any use or disclosure, in whole or in part, *
&lt;span class=&#34;ln&#34;&gt;18&lt;/span&gt;* of the IOSv Software or Documentation to any third party for any       *
&lt;span class=&#34;ln&#34;&gt;19&lt;/span&gt;* purposes is expressly prohibited except as otherwise authorized by     *
&lt;span class=&#34;ln&#34;&gt;20&lt;/span&gt;* Cisco in writing.                                                      *
&lt;span class=&#34;ln&#34;&gt;21&lt;/span&gt;**************************************************************************
&lt;span class=&#34;ln&#34;&gt;22&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;23&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;24&lt;/span&gt;HQ#show privilege
&lt;span class=&#34;ln&#34;&gt;25&lt;/span&gt;Currently in View Context with view &amp;#39;SHOWMODE&amp;#39;
&lt;span class=&#34;ln&#34;&gt;26&lt;/span&gt;HQ#
&lt;span class=&#34;ln&#34;&gt;27&lt;/span&gt;HQ#?
&lt;span class=&#34;ln&#34;&gt;28&lt;/span&gt;Exec commands:
&lt;span class=&#34;ln&#34;&gt;29&lt;/span&gt;  &amp;lt;1-99&amp;gt;   Session number to resume
&lt;span class=&#34;ln&#34;&gt;30&lt;/span&gt;  do-exec  Mode-independent &amp;#34;do-exec&amp;#34; prefix support
&lt;span class=&#34;ln&#34;&gt;31&lt;/span&gt;  enable   Turn on privileged commands
&lt;span class=&#34;ln&#34;&gt;32&lt;/span&gt;  exit     Exit from the EXEC
&lt;span class=&#34;ln&#34;&gt;33&lt;/span&gt;  show     Show running system information
&lt;span class=&#34;ln&#34;&gt;34&lt;/span&gt; 
&lt;span class=&#34;ln&#34;&gt;35&lt;/span&gt;HQ#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As we can see Joe can only issue show commands and we can verify what privilege Joe is under by issuing the show privilege command notice Joe is using the SHOWMODE parser view we created on the IOS router, how cool cat is that ;)&lt;/p&gt;
&lt;p&gt;Believe it or not that&#39;s it for this post. We have created policies on Microsoft NPS server as well as created parser views to limit access based on user accounts and tied it all together using radius. I hope this this information is helpful in helping you build a better RBAC with your network devices!&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;static-comments&#34;&gt;Static Comments:&lt;/h3&gt;
&lt;h4 id=&#34;heading&#34;&gt;&lt;/h4&gt;
&lt;p&gt;&lt;a href=&#34;http://ciscoskills.net/&#34; title=&#34;ryan@ciscoskills.net&#34;&gt;Ryan&lt;/a&gt; - &lt;time datetime=&#34;2018-02-01 20:45:49&#34;&gt;Feb 4, 2018&lt;/time&gt;&lt;/p&gt;
&lt;p&gt;Hey Darkpenguin, Privilege levels are hierarchical where as parser views are role based, so they are two different things. I can specifically call out different commands to use under a parser view regardless if its at a lower or higher privilege level. If you look at the example where the username Joe logs into the router, although this account has privilege level 15 this account is tied to a parser view called SHOWMODE. This account could only do show commands regardless what the privilege level was set. I really don&#39;t need to worry about privilege levels if I&#39;m using parser views, however you could give them a lower privilege level but I think the end result would be the same, they would only be able to use show commands on that lower privilege level. So I&#39;m not sure what benefit you would get from putting this group at a lower privilege level. Ryan&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;a href=&#34;http://gravatar.com/darkpenguin350&#34; title=&#34;email@emai.com&#34;&gt;darkpenguin350&lt;/a&gt; - &lt;time datetime=&#34;2018-01-29 09:13:23&#34;&gt;Jan 1, 2018&lt;/time&gt;&lt;/p&gt;
&lt;p&gt;Why add the &amp;quot;shell:priv-lvl=15&amp;quot; to the view only group?&lt;/p&gt;
&lt;hr /&gt;

        
      </description>
    </item>
    
    <item>
      <title>Understanding AAA</title>
      <link>https://ciscoskills.net/2011/04/understanding-aaa/</link>
      <pubDate>Fri, 29 Apr 2011 16:30:00 +0000</pubDate>
      
      <guid>https://ciscoskills.net/2011/04/understanding-aaa/</guid>
      <description>
        
          &lt;p&gt;&lt;a href=&#34;http://systemstechblog.files.wordpress.com/2011/04/user.png&#34;&gt;&lt;img src=&#34;http://systemstechblog.files.wordpress.com/2011/04/user.png&#34; alt=&#34;&#34; title=&#34;User&#34;&gt;&lt;/a&gt;The wonderful &lt;a href=&#34;http://en.wikipedia.org/wiki/AAA_protocol&#34; title=&#34;AAA protocol&#34;&gt;AAA&lt;/a&gt; which in the Cisco world means, &lt;a href=&#34;http://en.wikipedia.org/wiki/Authentication&#34; title=&#34;Authentication&#34;&gt;Authentication&lt;/a&gt;, &lt;a href=&#34;http://en.wikipedia.org/wiki/Authorization&#34; title=&#34;Authorization&#34;&gt;Authorization&lt;/a&gt;, and Accounting but what does that really mean? In today&#39;s post that&#39;s what we are going to be talking about. What is AAA and what are the benefits of using it along with what is it? The first &amp;quot;A&amp;quot; of AAA is Authentication which provides the method of identifying users, including login and password dialog, challenge and response, messaging support, and, depending on the security protocol you select, encryption. The second &amp;quot;A&amp;quot; of AAA is Authorization which provides the method for remote &lt;a href=&#34;http://en.wikipedia.org/wiki/Access_control&#34; title=&#34;Access control&#34;&gt;access control&lt;/a&gt;, including one-time authorization or authorization for each service, per-&lt;a href=&#34;http://en.wikipedia.org/wiki/User_%28computing%29&#34; title=&#34;User (computing)&#34;&gt;user account&lt;/a&gt; list and profile, user group support, and support of IP, &lt;a href=&#34;http://en.wikipedia.org/wiki/Internetwork_Packet_Exchange&#34; title=&#34;Internetwork Packet Exchange&#34;&gt;IPX&lt;/a&gt;, ARA, and Telnet. The third and last &amp;quot;A&amp;quot; of AAA is Accounting which provides the method for collecting and sending security server information used for billing, auditing, and reporting, such as user identities, start and stop times, executed commands (such as PPP), number of packets, and number of bytes. In a real world scenario I like to think of AAA has a police officer or a security guard that is blocking access to a building, they first want to make sure that they know who you are and you give the correct credentials that prove to them you are who you say you are. Once they have verified who you are they will want to check if you are authorized to enter the blocked building once they have approved you to have access they will be able to track or keep a record that you accessed the building. That is the same type of idea that the router or switch will do. Months ago I talked about &lt;a href=&#34;http://en.wikipedia.org/wiki/TACACS&#34; title=&#34;TACACS&#34;&gt;TACACS&lt;/a&gt; Plus and RADIUS these are both used to control access to the network. (See the post &lt;a href=&#34;http://ciscoskills.net/2011/02/10/tacacs-plus-and-radius/&#34; title=&#34;TACACS Plus and RADIUS&#34;&gt;TACACS Plus and RADIUS&lt;/a&gt;) You could say these services are the security guards or police officers. By using AAA it provides the following benefits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Increased flexibility and control of access configuration&lt;/li&gt;
&lt;li&gt;Scalability&lt;/li&gt;
&lt;li&gt;Standardized authentication methods, such as RADIUS, TACACS+, and Kerberos&lt;/li&gt;
&lt;li&gt;Multiple backup systems&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When you apply AAA to a network you now have full control of each network device that supports AAA. The user database is stored on the RADIUS or TACACS+ server, so instead of configuring and putting passwords and usernames for each network device once you configure a username and password on a &lt;a href=&#34;http://en.wikipedia.org/wiki/RADIUS&#34; title=&#34;RADIUS&#34;&gt;AAA server&lt;/a&gt; it now can get access to each network resource. You can also give that user certain privileges by specifying if that user can access that device. AAA is like &lt;a href=&#34;http://en.wikipedia.org/wiki/Active_Directory&#34; title=&#34;Active Directory&#34;&gt;Active Directory&lt;/a&gt; in the Windows Server environment. You can do a lot of configuration and really lock down your network infrastructure. AAA is not just for routers and switches in IT environments. This type of service can be used VPNs and regular users that use network resources. That&#39;s what I have for AAA if you want to find more information about it go to Cisco.com and like always I hope this information was informative and if you have an idea for any ICND1 or ICND2 material let me know by issuing a comment below.&lt;/p&gt;
&lt;h6 id=&#34;related-articles&#34;&gt;Related Articles&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://systemstechblog.wordpress.com/2011/02/17/cisco-ios-routers-auto-secure/&#34;&gt;Cisco IOS Routers: Auto Secure&lt;/a&gt; (systemstechblog.wordpress.com)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.brighthub.com/computing/enterprise-security/articles/113054.aspx&#34;&gt;Best Practices for Securing Identity and Managing Access&lt;/a&gt; (brighthub.com)&lt;/li&gt;
&lt;/ul&gt;

        
      </description>
    </item>
    
    <item>
      <title>TACACS Plus and RADIUS</title>
      <link>https://ciscoskills.net/2011/02/tacacs-plus-and-radius/</link>
      <pubDate>Thu, 10 Feb 2011 15:45:19 +0000</pubDate>
      
      <guid>https://ciscoskills.net/2011/02/tacacs-plus-and-radius/</guid>
      <description>
        
          &lt;p&gt;TACACS+ and RADIUS are both used to control access to network resources, but both of these protocols are different in how they operate depending how you want to secure your network. These protocols need to have (AAA) authentication, authorization, and accounting setup on the routers before you can set up these access server protocols.  First let&#39;s get some information on why we would need this type of access server protocol setup. Usually you will find this setup in medium to enterprise environments. What the access server does is provide a central location of all the users and privileges these users can do on network resources. If we did not have a server we would have to put these users manually on the Cisco IOS software and that could be time-consuming depending on how many devices (routers, switches) there are in your network infrastructure. So what can RADIUS and TACACS+ do? Both can provide a central location on who can access the network resources but both are different in how they authorize users. RADIUS is an access sever that uses the AAA and uses the UDP protocol. For Network security the information that is sent between the client and the server is authenticated by a shared password which is never sent over the network. Also any user passwords are encrypted between the client and the server. However one thing that is different between TACACS+ and RADIUS is with TACACS+ the whole packet is encrypted, RADIUS only encrypts the password everything else is in plain text for example the user name. RADIUS is able to support a variety of methods to authenticate a user when a username and password are sent. RADIUS can support PPP, PAP, CHAP, UNIX login and other authentication mechanisms. Over TACACS+ RADIUS is also available for free at various websites. Finally RADIUS combines authentication and authorization meaning once the user has been granted access the RAIDUS server is done and no longer is involved. RADIUS sends the privileges to the network device and it is up to the device to be able to allow or disallow certain commands and functions. &lt;a href=&#34;http://systemstechblog.wordpress.com/2011/02/10/tacacs-plus-and-radius/raidus/&#34;&gt;&lt;img src=&#34;http://systemstechblog.files.wordpress.com/2011/02/raidus.png?w=150&#34; alt=&#34;&#34; title=&#34;RAIDUS Server&#34;&gt;&lt;/a&gt; TACACS+ uses TCP instead of UDP which offers several advantages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TCP usages provide a separate acknowledgment that a request has been received, regardless of how loaded and slow the backend authentication mechanism.&lt;/li&gt;
&lt;li&gt;TCP provides immediate indication of a crashed, or not running, server by a reset (RST). You can determine when a server crashes and returns to service if you use long−lived TCP connections. UDP cannot tell the difference between a server that is down, a slow server, and a non−existent server.&lt;/li&gt;
&lt;li&gt;Using TCP keepalives, server crashes can be detected out−of−band with actual requests. Connections to multiple servers can be maintained simultaneously, and you only need to send messages to the ones that are known to be up and running.&lt;/li&gt;
&lt;li&gt;TCP is also more scalable and adapts to growing, as well as congested, networks.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Like mentioned above TACACS+ encrypts the entire packet, besides the standard header, RADIUS only encrypts the password. TACACS+ uses the AAA protocol like RADIUS but during a session the client checks with TACACS+ server to determine if the user is granted permission to use different commands and or functions. By doing this it provides greater control over commands that can be executed on the network resources. &lt;a href=&#34;http://systemstechblog.wordpress.com/2011/02/10/tacacs-plus-and-radius/tacacs/&#34;&gt;&lt;img src=&#34;http://systemstechblog.files.wordpress.com/2011/02/tacacs.png?w=100&#34; alt=&#34;TACACS+ Server&#34; title=&#34;TACACS+&#34;&gt;&lt;/a&gt; This may sound like TACACS+ is the preferred protocol but this all depends on your network needs RAIDUS is a great protocol for just usernames and passwords so in the end it all depends but both offer a central environment and that&#39;s my summary of the two protocols.&lt;/p&gt;

        
      </description>
    </item>
    
  </channel>
</rss>
