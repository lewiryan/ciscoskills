<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>File Transfer Protocol on Cisco Skills</title>
    <link>http://archive.ciscoskills.net.s3-website-us-west-2.amazonaws.com/tags/file-transfer-protocol/</link>
    <description>Recent content in File Transfer Protocol on Cisco Skills</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Tue, 22 Jan 2013 05:30:42 +0000</lastBuildDate><atom:link href="http://archive.ciscoskills.net.s3-website-us-west-2.amazonaws.com/tags/file-transfer-protocol/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Archive your Configuration</title>
      <link>http://archive.ciscoskills.net.s3-website-us-west-2.amazonaws.com/2013/01/archive-your-configuration/</link>
      <pubDate>Tue, 22 Jan 2013 05:30:42 +0000</pubDate>
      
      <guid>http://archive.ciscoskills.net.s3-website-us-west-2.amazonaws.com/2013/01/archive-your-configuration/</guid>
      <description>
        
          &lt;p&gt;&lt;a href=&#34;http://systemstechblog.files.wordpress.com/2013/01/hard20drive-black.png&#34;&gt;&lt;img src=&#34;http://systemstechblog.files.wordpress.com/2013/01/hard20drive-black.png&#34; alt=&#34;Hard-Drive&#34;&gt;&lt;/a&gt;It is important to save your &lt;a href=&#34;http://en.wikipedia.org/wiki/Router_%28computing%29&#34; title=&#34;Router (computing)&#34;&gt;router&lt;/a&gt; and switch configuration but what happens if the device fails or if you saved a configuration mistake, without having to manually worry about it? Well if your Cisco router or switch has &lt;a href=&#34;http://en.wikipedia.org/wiki/Cisco_IOS&#34; title=&#34;Cisco IOS&#34;&gt;Cisco IOS&lt;/a&gt; 12.3T and higher you would be able to set up an auto archive within the &lt;a href=&#34;http://en.wikipedia.org/wiki/Flash_memory&#34; title=&#34;Flash memory&#34;&gt;flash memory&lt;/a&gt; of the unit or you can send that configuration file to a server that does either &lt;a href=&#34;http://en.wikipedia.org/wiki/File_Transfer_Protocol&#34; title=&#34;File Transfer Protocol&#34;&gt;FTP&lt;/a&gt;, &lt;a href=&#34;http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol&#34; title=&#34;Hypertext Transfer Protocol&#34;&gt;HTTP&lt;/a&gt;, SCP. &lt;a href=&#34;http://en.wikipedia.org/wiki/Trivial_File_Transfer_Protocol&#34; title=&#34;Trivial File Transfer Protocol&#34;&gt;TFTP&lt;/a&gt;, etc. Let&#39;s work through on setting up the archive feature on a Cisco Router. In this example we will look at one way to archive your configuration to the flash memory of the unit. This is good if you want the ability to revert back quickly to an existing configuration that has been saved in flash. Keep in mind this is not the only way to archive your configuration, instead of &lt;a href=&#34;http://en.wikipedia.org/wiki/Archive&#34; title=&#34;Archive&#34;&gt;archiving&lt;/a&gt; it to flash memory you could back it up on a server using some common transfer file protocol like FTP, TFTP and other options. Let&#39;s start setting up the archive feature so I&#39;m on the HQ Router and to archive to flash, the first thing we have to do is enter configuration mode followed by typing &lt;strong&gt;archive&lt;/strong&gt; and hit enter. [code]HQ#configure terminal Enter configuration commands, one per line. End with CNTL/Z. HQ(config)#archive HQ(config-archive)#[/code] You will notice we are in the archive configuration mode hit the question to see the available commands. [code]HQ(config-archive)#? Archive configuration commands: default Set a command to its defaults exit Exit from archive configuration mode log Logging commands maximum maximum number of backup copies no Negate a command or set its defaults path path for backups rollback Rollback parameters time-period Period of time in minutes to automatically archive the running-config write-memory Enable automatic backup generation during write memory[/code] For this we will put are configuration on the &lt;a href=&#34;http://en.wikipedia.org/wiki/Flash_file_system&#34; title=&#34;Flash file system&#34;&gt;flash file system&lt;/a&gt; let&#39;s keep it simple by just calling it &lt;strong&gt;HQ-RTR.config&lt;/strong&gt; here is our example: [code]HQ(config-archive)#path flash:HQ-RTR.config[/code] This writes the configuration into flash and by default writes up to ten and then rolls them over. This is also where you could point this path to an FTP/TFTP server instead of flash. To archive your configuration while under the &lt;strong&gt;config-archive&lt;/strong&gt; mode you have two choices, both of these options could be used together. The write-memory option will archive you configuration after you issue the &lt;strong&gt;copy running-config startup-config&lt;/strong&gt; command. The time-period command will write the configuration to flash every &lt;em&gt;X&lt;/em&gt; amount minutes. Where &lt;em&gt;X&lt;/em&gt; is the number of minutes you specify after the command. See an example of both commands below: [code]HQ(config-archive)#write-memory HQ(config-archive)#time-period 500000[/code] To see your archives you can issue the command show archive, in this example I have two archives located in flash. This command would also work if you are storing them on a FTP/TFTP server. [code]HQ#show archive There are currently 3 archive configurations saved. The next archive file will be named flash:HQ-RTR.config-3 Archive # Name 0 1 flash:HQ-RTR.config-1 2 flash:HQ-RTR.config-2 3 4 5 6 7 8 9 10 11 12 13 14[/code] You can also see these archives in the flash file system by issuing the &lt;strong&gt;show flash&lt;/strong&gt; command. [code]HQ#show flash: -#- --length-- -----date/time------ path 1 19939672 Sep 16 2008 15:51:54 +00:00 c1841-spservicesk9-mz.124-6.T7.bin 2 1122 Jan 22 2013 03:49:18 +00:00 HQ-RTR.config-1 3 1142 Jan 22 2013 03:54:28 +00:00 HQ-RTR.config-2 44060672 bytes available (19951616 bytes used)[/code] Let&#39;s roll back from an archive, to do this it is pretty simple just use the &lt;strong&gt;configure replace&lt;/strong&gt; command followed by &lt;strong&gt;archive&lt;/strong&gt; and the archive file you would like to replace the running-config. Let&#39;s look below and see the process as an example. [code]HQ#configure replace archive:flash:HQ-RTR.config-2 This will apply all necessary additions and deletions to replace the current running configuration with the contents of the specified configuration file, which is assumed to be a complete configuration, not a partial configuration. Enter Y if you are sure you want to proceed. ? [no]: Y HQ#[/code] That&#39;s it! You can either put these archives on the flash of the device or you can setup a simple FTP, TFTP, SCP, etc. box and have your configurations stored there. Like always I hope this information is helpful and post below if you have questions about this topic.You can also find more information on Cisco&#39;s website about the archiving along with the configure replace and rollback commands.Â &lt;a href=&#34;http://www.cisco.com/en/US/docs/ios/12_3t/12_3t7/feature/guide/gtrollbk.html#wp1066264&#34; title=&#34;Configuration Replace and Configuration Rollback&#34;&gt;Configuration Replace and Configuration Rollback&lt;/a&gt; Enjoy! :)&lt;/p&gt;
&lt;h6 id=&#34;related-articles&#34;&gt;Related articles&lt;/h6&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://ciscoskills.net/2012/12/01/configure-dhcp-on-a-cisco-router/&#34;&gt;Configure DHCP on a Cisco Router&lt;/a&gt; (ciscoskills.net)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://rekrowten.wordpress.com/2012/12/26/how-to-remove-tracked-interface-from-hsrp/&#34;&gt;How to Remove Tracked Interface from HSRP&lt;/a&gt; (rekrowten.wordpress.com)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.sucuri.net/2012/11/psa-sftpftp-password-exposure-via-sftp-config-json.html&#34;&gt;SFTP/FTP Password Exposure via sftp-config.json&lt;/a&gt; (sucuri.net)&lt;/li&gt;
&lt;/ul&gt;

        
      </description>
    </item>
    
  </channel>
</rss>
