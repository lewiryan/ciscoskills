<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>tftp on Cisco Skills</title>
    <link>https://ciscoskills.net/tags/tftp/</link>
    <description>Recent content in tftp on Cisco Skills</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 16 Sep 2016 12:30:00 +0000</lastBuildDate><atom:link href="https://ciscoskills.net/tags/tftp/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>TFTP &amp; FTP Server on Centos 7</title>
      <link>https://ciscoskills.net/2016/09/tftp-ftp-server-on-centos-7/</link>
      <pubDate>Fri, 16 Sep 2016 12:30:00 +0000</pubDate>
      
      <guid>https://ciscoskills.net/2016/09/tftp-ftp-server-on-centos-7/</guid>
      <description>
        
          &lt;p&gt;If you ever needed a TFTP or an anonymous FTP server to transfer files, logs, or crash debugs to and from your network devices it can be a little tricky if you don&#39;t have anything setup. There are some free quick programs out there if you are in a pinch for one-time transfers but if you ever wanted to have something in infrastructure that is ready to go for this kind of stuff just follow this tutorial below.&lt;/p&gt;
&lt;p&gt;I&#39;m using the latest version of Centos 7 minimal, we need to add some house keeping items first so let&#39;s get started! Install NANO ( I like it, don&#39;t judge me!):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;yum install nano
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Install Firewalld (Seems like Centos 7 1511 does not include it at least the minimal version)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;yum install firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Enable firewalld to startup automatically when Centos boots up:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl enable firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Start firewalld:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl start firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This first part of this tutorial will go over installing TFTP followed by installing the FTP. If you want to skip TFTP installation, i.e you only need FTP, select the link: &lt;a href=&#34;#install-ftp-server-on-centos-7&#34;&gt;Install FTP Server on Centos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Add the TFTP rule to the Centos Firewall and reload it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;firewall-cmd --permanent --zone=public --add-service=tftp
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Install the TFTP server as well as the TFTP client just in case we want to test TFTP locally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;yum install xinetd tftp-server tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Enable the TFTP program to startup automatically:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl enable xinetd tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Start the TFTP program now:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl start xinetd tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since we have started the TFTP service let&#39;s focus on the configuration file and settings for it. We don&#39;t want this TFTP service to run has root, so let&#39;s create a system account for TFTP.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;useradd -s /bin/false -r tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This command basically creates a system account which cannot be used to access a shell a.k.a &amp;quot;login&amp;quot;. Depending on how this system was installed your path may be different if you are expecting to store a lot of files. In this tutorial I&#39;m going to be hosting these files under the /var folder. My full path is /var/FileServerRoot/TFTP The folder FileServerRoot is not created by default so I&#39;ll create the folder and put the correct permissions on this folder so that the TFTP system account can get access to it. Create the FileServerRoot Folder as well as a sub folder under it called TFTP:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;mkdir /var/FileServerRoot
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;mkdir /var/FileServerRoot/TFTP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Apply ownership for the TFTP system account:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;chown tftp:tftp /var/FileServerRoot/TFTP/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Permissions should already be rwxr-xr-x for this directory. Next open up the configuration file for the TFTP server located at /etc/xinetd.d/tftp and following the example configuration file below:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;nano /etc/xinetd.d/tftp
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt;# default: off
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;# description: The tftp server serves files using the trivial file transfer \
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;#       protocol.  The tftp protocol is often used to boot diskless \
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;#       workstations, download configuration files to network-aware printers, \
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;#       and to start the installation process for some operating systems.
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;service tftp
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;{
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;        socket_type             = dgram
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;        protocol                = udp
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;        wait                    = yes
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;        user                    = root
&lt;span class=&#34;ln&#34;&gt;13&lt;/span&gt;        server                  = /usr/sbin/in.tftpd
&lt;span class=&#34;ln&#34;&gt;14&lt;/span&gt;        server_args             = -c -s /var/FileServerRoot/TFTP -v -v -v -u tftp -p
&lt;span class=&#34;ln&#34;&gt;15&lt;/span&gt;        disable                 = no
&lt;span class=&#34;ln&#34;&gt;16&lt;/span&gt;        per_source              = 11
&lt;span class=&#34;ln&#34;&gt;17&lt;/span&gt;        cps                     = 100 2
&lt;span class=&#34;ln&#34;&gt;18&lt;/span&gt;        flags                   = IPv4
&lt;span class=&#34;ln&#34;&gt;19&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you are curious of what each server argument means you can take a look &lt;a href=&#34;http://linux.die.net/man/8/tftpd&#34;&gt;here&lt;/a&gt; at the man page for TFTP server. Restart both services for the TFTP server:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl restart xinetd tftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So after that we have to run more command for SELinux to be happy and the best part is we DON&#39;T turn it off! Right now we are able to download files from the TFTP server but we get a permission denied when we try to upload files. To fix that run this command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;chcon -t tftpdir\_rw\_t /var/FileServerRoot/TFTP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We now have a functioning TFTP server, all files permissions in this folder should be no more than 664. Although it would work with full permissions TFTP isn&#39;t that secure to begin with, now onto installing the FTP server :)&lt;/p&gt;
&lt;h2 id=&#34;install-ftp-server-on-centos-7&#34;&gt;Install FTP Server on Centos 7&lt;/h2&gt;
&lt;p&gt;Alight let&#39;s install the FTP server on Centos and include the FTP client just in case we want to test locally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;yum install vsftpd ftp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now let&#39;s start looking at the firewall settings, and configuration settings to make this FTP anonymous for both uploads and downloads. Add an FTP rule to firewall and reload it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;firewall-cmd --permanent --zone=public --add-service=ftp
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;firewall-cmd --reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Enable the vsftpd to startup apon boot:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;systemctl enable vsftpd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Let&#39;s create the FTP folder and in this example its going to be under the FileServerRoot we created earlier with TFTP or if you skiped the TFTP installation just create a Root directory first followed by creating the FTP folder.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;mkdir /var/FileServerRoot
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;mkdir /var/FileServerRoot/FTP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We have to change permissions on the FTP folder to the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;chmod 555 /var/FileServerRoot/FTP\
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We are also going to make two more folders under the FTP folder called upload and download to keep things organized:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;mkdir /var/FileServerRoot/FTP/upload
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;mkdir /var/FileServerRoot/FTP/download
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Change ownership of these folder to the FTP account which is built in:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;chown ftp:ftp /var/FileServerRoot/FTP/upload
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;chown ftp:ftp /var/FileServerRoot/FTP/download
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Let&#39;s make a backup of the configuration file that runs FTP (Just in case)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.orig
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Open up the configuration file with nano at /etc/vsftpq/vsftpd.conf and make the following edits towards the top of the file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;# Allow anonymous FTP? (Beware - allowed by default if you comment this out).
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt;anonymous_enable=YES
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;# Uncomment this to allow local users to log in.
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;# When SELinux is enforcing check for SE bool ftp_home_dir
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;local_enable=NO
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;# Uncomment this to enable any form of FTP write command.
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;write_enable=YES
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;# Default umask for local users is 077. You may wish to change this to 022,
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;# if your users expect that (022 is used by most other ftpd&amp;#39;s)
&lt;span class=&#34;ln&#34;&gt;13&lt;/span&gt;local_umask=022
&lt;span class=&#34;ln&#34;&gt;14&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt;15&lt;/span&gt;# Uncomment this to allow the anonymous FTP user to upload files. This only
&lt;span class=&#34;ln&#34;&gt;16&lt;/span&gt;# has an effect if the above global write enable is activated. Also, you will
&lt;span class=&#34;ln&#34;&gt;17&lt;/span&gt;# obviously need to create a directory writable by the FTP user.
&lt;span class=&#34;ln&#34;&gt;18&lt;/span&gt;# When SELinux is enforcing check for SE bool allow_ftpd_anon_write, allow_ftpd_full_access
&lt;span class=&#34;ln&#34;&gt;19&lt;/span&gt;anon_upload_enable=YES
&lt;span class=&#34;ln&#34;&gt;20&lt;/span&gt;#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;At the end of file put the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt; 1&lt;/span&gt;# Point users at the Public directory
&lt;span class=&#34;ln&#34;&gt; 2&lt;/span&gt;anon_root=/var/FileServerRoot/FTP/
&lt;span class=&#34;ln&#34;&gt; 3&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt; 4&lt;/span&gt;# Stop prompting for a password on the command line.
&lt;span class=&#34;ln&#34;&gt; 5&lt;/span&gt;no_anon_password=YES
&lt;span class=&#34;ln&#34;&gt; 6&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt; 7&lt;/span&gt;# Show the user and group as ftp:ftp, regardless of the owner.
&lt;span class=&#34;ln&#34;&gt; 8&lt;/span&gt;hide_ids=YES
&lt;span class=&#34;ln&#34;&gt; 9&lt;/span&gt;#
&lt;span class=&#34;ln&#34;&gt;10&lt;/span&gt;# Limit the range of ports that can be used for passive FTP
&lt;span class=&#34;ln&#34;&gt;11&lt;/span&gt;pasv_min_port=40000
&lt;span class=&#34;ln&#34;&gt;12&lt;/span&gt;pasv_max_port=50000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We are almost done we have to make some changes to SELinux before we are good to go. We have to install Policy Core Utils:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;yum install policycoreutils-python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We are now making changes to SELinux to allow anonymous downloads:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;semanage fcontext -a -t public\_content\_t &amp;#34;/var/FileServerRoot/FTP(/.\*)?&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next command to run:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;restorecon -R -v /var/FileServerRoot/FTP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;-Output -&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;restorecon reset /var/FileServerRoot/FTP context unconfined_u:object_r:var_t:s0-&amp;amp;gt;unconfined_u:object_r:public_content_t:s0
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;restorecon reset /var/FileServerRoot/FTP/upload context unconfined_u:object_r:var_t:s0-&amp;amp;gt;unconfined_u:object_r:public_content_t:s0
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;restorecon reset /var/FileServerRoot/FTP/download context unconfined_u:object_r:var_t:s0-&amp;amp;gt;unconfined_u:object_r:public_content_t:s0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now let&#39;s make changes to SELinux to allow anonymous uploads:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;semanage fcontext -a -t public\_content\_rw\_t &amp;#34;/var/FileServerRoot/FTP/upload(/.\*)?&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next command to run:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;restorecon -R -v /var/FileServerRoot/FTP/upload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;-Output -&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;restorecon reset /var/FileServerRoot/FTP/upload context unconfined_u:object_r:public_content_t:s0-&amp;amp;gt;unconfined_u:object_r:public_content_rw_t:s0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;One more command to run:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;semanage boolean -m --on allow\_ftpd\_anon\_write\
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;That should be it! Let&#39;s restart the server to make sure everything comes back online including the TFTP part that we finished earlier.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;shutdown -r now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you have a TFTP and FTP client go ahead and test it out when the server reboots. If you run into some issues some troubleshooting tips are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Check SELinux, if you are getting file permissions errors when uploading or downloading and permissions look this is likely SELinuix. It it can be a little picky which is why you&#39;ll read a lot of people just disable it. You can disable SELinux Temporarily (Turns back on when you reboot) to check if TFTP or FTP works by running&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;setenforce 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;If you are having problems with anonymous FTP, like downloading or uploading check security context by running:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ls -Z
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;For FTP to work the context output should like something below:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;[root@localhost ~]# ls -Z /var/FileServerRoot/FTP/
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;drwxr-xr-x. ftp ftp unconfined_u:object_r:public_content_t:s0 download
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;drwxr-xr-x. ftp ftp unconfined_u:object_r:public_content_rw_t:s0 upload
&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;[root@localhost ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Keep in mind we just created a system that is open to any TFTP and FTP connection. Reads and writes are anonymous so if there is a need to control what/who can access your server over your network/internet its recommended to in put ACLs in place to block unwanted connections. Otherwise you might be on list like &lt;a href=&#34;https://github.com/massivedynamic/openftp4&#34;&gt;this one&lt;/a&gt;, in which the entire IPv4 address space was scanned to find what responds anonymously on TCP port 21. That&#39;s all I got for now, as always I hope this information helpful!&lt;/p&gt;

        
      </description>
    </item>
    
  </channel>
</rss>
